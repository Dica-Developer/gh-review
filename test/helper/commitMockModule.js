angular.module('commitMockModule', [])
  .constant('commitsMock', [
    {
      'sha': '7e3cc043458366a4205621bc2c006bafd6f6c4db',
      'commit': {
        'author': {
          'name': 'Sebastian Froehlich',
          'email': 'sfroehlich@datameer.com',
          'date': '2013-10-15T21:21:33Z'
        },
        'committer': {
          'name': 'Sebastian Froehlich',
          'email': 'sfroehlich@datameer.com',
          'date': '2013-10-15T21:21:50Z'
        },
        'message': 'create README.md fixes #2',
        'tree': {
          'sha': '27c2e0054260883a7c39e018012dd8ee32c71b3e',
          'url': 'https://api.github.com/repos/Dica-Developer/gh-review/git/trees/27c2e0054260883a7c39e018012dd8ee32c71b3e'
        },
        'url': 'https://api.github.com/repos/Dica-Developer/gh-review/git/commits/7e3cc043458366a4205621bc2c006bafd6f6c4db',
        'comment_count': 2
      },
      'url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/7e3cc043458366a4205621bc2c006bafd6f6c4db',
      'html_url': 'https://github.com/Dica-Developer/gh-review/commit/7e3cc043458366a4205621bc2c006bafd6f6c4db',
      'comments_url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/7e3cc043458366a4205621bc2c006bafd6f6c4db/comments',
      'author': {
        'login': 'sebfroh',
        'id': 818746,
        'avatar_url': 'https://avatars.githubusercontent.com/u/818746?v=2',
        'gravatar_id': '',
        'url': 'https://api.github.com/users/sebfroh',
        'html_url': 'https://github.com/sebfroh',
        'followers_url': 'https://api.github.com/users/sebfroh/followers',
        'following_url': 'https://api.github.com/users/sebfroh/following{/other_user}',
        'gists_url': 'https://api.github.com/users/sebfroh/gists{/gist_id}',
        'starred_url': 'https://api.github.com/users/sebfroh/starred{/owner}{/repo}',
        'subscriptions_url': 'https://api.github.com/users/sebfroh/subscriptions',
        'organizations_url': 'https://api.github.com/users/sebfroh/orgs',
        'repos_url': 'https://api.github.com/users/sebfroh/repos',
        'events_url': 'https://api.github.com/users/sebfroh/events{/privacy}',
        'received_events_url': 'https://api.github.com/users/sebfroh/received_events',
        'type': 'User',
        'site_admin': false
      },
      'committer': {
        'login': 'sebfroh',
        'id': 818746,
        'avatar_url': 'https://avatars.githubusercontent.com/u/818746?v=2',
        'gravatar_id': '',
        'url': 'https://api.github.com/users/sebfroh',
        'html_url': 'https://github.com/sebfroh',
        'followers_url': 'https://api.github.com/users/sebfroh/followers',
        'following_url': 'https://api.github.com/users/sebfroh/following{/other_user}',
        'gists_url': 'https://api.github.com/users/sebfroh/gists{/gist_id}',
        'starred_url': 'https://api.github.com/users/sebfroh/starred{/owner}{/repo}',
        'subscriptions_url': 'https://api.github.com/users/sebfroh/subscriptions',
        'organizations_url': 'https://api.github.com/users/sebfroh/orgs',
        'repos_url': 'https://api.github.com/users/sebfroh/repos',
        'events_url': 'https://api.github.com/users/sebfroh/events{/privacy}',
        'received_events_url': 'https://api.github.com/users/sebfroh/received_events',
        'type': 'User',
        'site_admin': false
      },
      'parents': [
        {
          'sha': '10b2a797c7ff0f4d477439da88b2e8f45604e0e7',
          'url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/10b2a797c7ff0f4d477439da88b2e8f45604e0e7',
          'html_url': 'https://github.com/Dica-Developer/gh-review/commit/10b2a797c7ff0f4d477439da88b2e8f45604e0e7'
        }
      ]
    },
    {
      'sha': '10b2a797c7ff0f4d477439da88b2e8f45604e0e7',
      'commit': {
        'author': {
          'name': 'Jörg Weber',
          'email': 'weber_joerg.h@web.de',
          'date': '2013-10-15T20:14:13Z'
        },
        'committer': {
          'name': 'Jörg Weber',
          'email': 'weber_joerg.h@web.de',
          'date': '2013-10-15T20:14:13Z'
        },
        'message': 'Revert \'* fix auth handler event binding\'\n\nThis reverts commit 5dcfd93a29f86efe77fbee73ca32071791411f29.',
        'tree': {
          'sha': '0107bd78497fa65d633a8bc550635d934004e0db',
          'url': 'https://api.github.com/repos/Dica-Developer/gh-review/git/trees/0107bd78497fa65d633a8bc550635d934004e0db'
        },
        'url': 'https://api.github.com/repos/Dica-Developer/gh-review/git/commits/10b2a797c7ff0f4d477439da88b2e8f45604e0e7',
        'comment_count': 0
      },
      'url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/10b2a797c7ff0f4d477439da88b2e8f45604e0e7',
      'html_url': 'https://github.com/Dica-Developer/gh-review/commit/10b2a797c7ff0f4d477439da88b2e8f45604e0e7',
      'comments_url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/10b2a797c7ff0f4d477439da88b2e8f45604e0e7/comments',
      'author': {
        'login': 'JayGray',
        'id': 675206,
        'avatar_url': 'https://avatars.githubusercontent.com/u/675206?v=2',
        'gravatar_id': '',
        'url': 'https://api.github.com/users/JayGray',
        'html_url': 'https://github.com/JayGray',
        'followers_url': 'https://api.github.com/users/JayGray/followers',
        'following_url': 'https://api.github.com/users/JayGray/following{/other_user}',
        'gists_url': 'https://api.github.com/users/JayGray/gists{/gist_id}',
        'starred_url': 'https://api.github.com/users/JayGray/starred{/owner}{/repo}',
        'subscriptions_url': 'https://api.github.com/users/JayGray/subscriptions',
        'organizations_url': 'https://api.github.com/users/JayGray/orgs',
        'repos_url': 'https://api.github.com/users/JayGray/repos',
        'events_url': 'https://api.github.com/users/JayGray/events{/privacy}',
        'received_events_url': 'https://api.github.com/users/JayGray/received_events',
        'type': 'User',
        'site_admin': false
      },
      'committer': {
        'login': 'JayGray',
        'id': 675206,
        'avatar_url': 'https://avatars.githubusercontent.com/u/675206?v=2',
        'gravatar_id': '',
        'url': 'https://api.github.com/users/JayGray',
        'html_url': 'https://github.com/JayGray',
        'followers_url': 'https://api.github.com/users/JayGray/followers',
        'following_url': 'https://api.github.com/users/JayGray/following{/other_user}',
        'gists_url': 'https://api.github.com/users/JayGray/gists{/gist_id}',
        'starred_url': 'https://api.github.com/users/JayGray/starred{/owner}{/repo}',
        'subscriptions_url': 'https://api.github.com/users/JayGray/subscriptions',
        'organizations_url': 'https://api.github.com/users/JayGray/orgs',
        'repos_url': 'https://api.github.com/users/JayGray/repos',
        'events_url': 'https://api.github.com/users/JayGray/events{/privacy}',
        'received_events_url': 'https://api.github.com/users/JayGray/received_events',
        'type': 'User',
        'site_admin': false
      },
      'parents': [
        {
          'sha': '5dcfd93a29f86efe77fbee73ca32071791411f29',
          'url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/5dcfd93a29f86efe77fbee73ca32071791411f29',
          'html_url': 'https://github.com/Dica-Developer/gh-review/commit/5dcfd93a29f86efe77fbee73ca32071791411f29'
        }
      ]
    },
    {
      'sha': 'b8ce653175caa3b397bc4618eb952a41b4e648c1',
      'commit': {
        'author': {
          'name': 'Martin Schaaf',
          'email': 'mschaaf@datameer.com',
          'date': '2013-10-15T16:41:16Z'
        },
        'committer': {
          'name': 'Martin Schaaf',
          'email': 'mschaaf@datameer.com',
          'date': '2013-10-15T16:41:16Z'
        },
        'message': '* center spinner in screen',
        'tree': {
          'sha': 'b737ef123bea18935e84a794503d4f160caf6dd8',
          'url': 'https://api.github.com/repos/Dica-Developer/gh-review/git/trees/b737ef123bea18935e84a794503d4f160caf6dd8'
        },
        'url': 'https://api.github.com/repos/Dica-Developer/gh-review/git/commits/b8ce653175caa3b397bc4618eb952a41b4e648c1',
        'comment_count': 1
      },
      'url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/b8ce653175caa3b397bc4618eb952a41b4e648c1',
      'html_url': 'https://github.com/Dica-Developer/gh-review/commit/b8ce653175caa3b397bc4618eb952a41b4e648c1',
      'comments_url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/b8ce653175caa3b397bc4618eb952a41b4e648c1/comments',
      'author': {
        'login': 'mschaaf',
        'id': 703355,
        'avatar_url': 'https://avatars.githubusercontent.com/u/703355?v=2',
        'gravatar_id': '',
        'url': 'https://api.github.com/users/mschaaf',
        'html_url': 'https://github.com/mschaaf',
        'followers_url': 'https://api.github.com/users/mschaaf/followers',
        'following_url': 'https://api.github.com/users/mschaaf/following{/other_user}',
        'gists_url': 'https://api.github.com/users/mschaaf/gists{/gist_id}',
        'starred_url': 'https://api.github.com/users/mschaaf/starred{/owner}{/repo}',
        'subscriptions_url': 'https://api.github.com/users/mschaaf/subscriptions',
        'organizations_url': 'https://api.github.com/users/mschaaf/orgs',
        'repos_url': 'https://api.github.com/users/mschaaf/repos',
        'events_url': 'https://api.github.com/users/mschaaf/events{/privacy}',
        'received_events_url': 'https://api.github.com/users/mschaaf/received_events',
        'type': 'User',
        'site_admin': false
      },
      'committer': {
        'login': 'mschaaf',
        'id': 703355,
        'avatar_url': 'https://avatars.githubusercontent.com/u/703355?v=2',
        'gravatar_id': '',
        'url': 'https://api.github.com/users/mschaaf',
        'html_url': 'https://github.com/mschaaf',
        'followers_url': 'https://api.github.com/users/mschaaf/followers',
        'following_url': 'https://api.github.com/users/mschaaf/following{/other_user}',
        'gists_url': 'https://api.github.com/users/mschaaf/gists{/gist_id}',
        'starred_url': 'https://api.github.com/users/mschaaf/starred{/owner}{/repo}',
        'subscriptions_url': 'https://api.github.com/users/mschaaf/subscriptions',
        'organizations_url': 'https://api.github.com/users/mschaaf/orgs',
        'repos_url': 'https://api.github.com/users/mschaaf/repos',
        'events_url': 'https://api.github.com/users/mschaaf/events{/privacy}',
        'received_events_url': 'https://api.github.com/users/mschaaf/received_events',
        'type': 'User',
        'site_admin': false
      },
      'parents': [
        {
          'sha': '6608d8051984e80870e6a19b292ffdb1bb438418',
          'url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/6608d8051984e80870e6a19b292ffdb1bb438418',
          'html_url': 'https://github.com/Dica-Developer/gh-review/commit/6608d8051984e80870e6a19b292ffdb1bb438418'
        }
      ]
    },
    {
      'sha': '6ff8da937f901a1ff470e84d663161a3446cb8b7',
      'commit': {
        'author': {
          'name': 'Jörg Weber',
          'email': 'weber.joerg.h@gmail.com',
          'date': '2015-01-24T22:20:02Z'
        },
        'committer': {
          'name': 'Jörg Weber',
          'email': 'weber.joerg.h@gmail.com',
          'date': '2015-01-24T22:20:02Z'
        },
        'message': 'Clarify actual Filter and filterService\n\n* clean up actual Filter and move service methods\n  to service (eg. getNew, getCloneOf)\n\n* filterService is now an actual service and\n  provides all necessary methods to handle Filter\n\n* simplify cloning a Filter and handling if Filter\n  is a clone\n\n* adjust test to new behaviour\n\n* rename filter-provider.service to Filter.factory\n  to make it more clear',
        'tree': {
          'sha': 'c6da707c39d812ecf3b30236d685c98ea12a09d6',
          'url': 'https://api.github.com/repos/Dica-Developer/gh-review/git/trees/c6da707c39d812ecf3b30236d685c98ea12a09d6'
        },
        'url': 'https://api.github.com/repos/Dica-Developer/gh-review/git/commits/6ff8da937f901a1ff470e84d663161a3446cb8b7',
        'comment_count': 0
      },
      'url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/6ff8da937f901a1ff470e84d663161a3446cb8b7',
      'html_url': 'https://github.com/Dica-Developer/gh-review/commit/6ff8da937f901a1ff470e84d663161a3446cb8b7',
      'comments_url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/6ff8da937f901a1ff470e84d663161a3446cb8b7/comments',
      'author': {
        'login': 'JayGray',
        'id': 675206,
        'avatar_url': 'https://avatars.githubusercontent.com/u/675206?v=3',
        'gravatar_id': '',
        'url': 'https://api.github.com/users/JayGray',
        'html_url': 'https://github.com/JayGray',
        'followers_url': 'https://api.github.com/users/JayGray/followers',
        'following_url': 'https://api.github.com/users/JayGray/following{/other_user}',
        'gists_url': 'https://api.github.com/users/JayGray/gists{/gist_id}',
        'starred_url': 'https://api.github.com/users/JayGray/starred{/owner}{/repo}',
        'subscriptions_url': 'https://api.github.com/users/JayGray/subscriptions',
        'organizations_url': 'https://api.github.com/users/JayGray/orgs',
        'repos_url': 'https://api.github.com/users/JayGray/repos',
        'events_url': 'https://api.github.com/users/JayGray/events{/privacy}',
        'received_events_url': 'https://api.github.com/users/JayGray/received_events',
        'type': 'User',
        'site_admin': false
      },
      'committer': {
        'login': 'JayGray',
        'id': 675206,
        'avatar_url': 'https://avatars.githubusercontent.com/u/675206?v=3',
        'gravatar_id': '',
        'url': 'https://api.github.com/users/JayGray',
        'html_url': 'https://github.com/JayGray',
        'followers_url': 'https://api.github.com/users/JayGray/followers',
        'following_url': 'https://api.github.com/users/JayGray/following{/other_user}',
        'gists_url': 'https://api.github.com/users/JayGray/gists{/gist_id}',
        'starred_url': 'https://api.github.com/users/JayGray/starred{/owner}{/repo}',
        'subscriptions_url': 'https://api.github.com/users/JayGray/subscriptions',
        'organizations_url': 'https://api.github.com/users/JayGray/orgs',
        'repos_url': 'https://api.github.com/users/JayGray/repos',
        'events_url': 'https://api.github.com/users/JayGray/events{/privacy}',
        'received_events_url': 'https://api.github.com/users/JayGray/received_events',
        'type': 'User',
        'site_admin': false
      },
      'parents': [
        {
          'sha': '250f94664f40596c733ab25a7a29c74cbe004d2d',
          'url': 'https://api.github.com/repos/Dica-Developer/gh-review/commits/250f94664f40596c733ab25a7a29c74cbe004d2d',
          'html_url': 'https://github.com/Dica-Developer/gh-review/commit/250f94664f40596c733ab25a7a29c74cbe004d2d'
        }
      ],
      'stats': {
        'total': 445,
        'additions': 205,
        'deletions': 240
      },
      'files': [
        {
          'sha': '0c4edf0b7fd3fc3f0455e1169b2e7817e1dbef5b',
          'filename': 'client/app/directives/commit-list/commit-list.directive.spec.js',
          'status': 'modified',
          'additions': 5,
          'deletions': 5,
          'changes': 10,
          'blob_url': 'https://github.com/Dica-Developer/gh-review/blob/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/app/directives/commit-list/commit-list.directive.spec.js',
          'raw_url': 'https://github.com/Dica-Developer/gh-review/raw/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/app/directives/commit-list/commit-list.directive.spec.js',
          'contents_url': 'https://api.github.com/repos/Dica-Developer/gh-review/contents/client/app/directives/commit-list/commit-list.directive.spec.js?ref=6ff8da937f901a1ff470e84d663161a3446cb8b7',
          'patch': '@@ -2,9 +2,9 @@\n describe(\'Directive: commit-list\', function () {\n   \'use strict\';\n \n-  beforeEach(angular.mock.module(\'GHReview\'));\n-  beforeEach(angular.mock.module(\'commitMockModule\'));\n-  beforeEach(angular.mock.module(\'app/directives/commit-list/commit-list.html\'));\n+  beforeEach(module(\'GHReview\'));\n+  beforeEach(module(\'commitMockModule\'));\n+  beforeEach(module(\'app/directives/commit-list/commit-list.html\'));\n   beforeEach(module(\'app/welcome/welcome.html\'));\n \n   var $rootScope, $scope, $controller, $q, $location, commits, commentCollector, filter;\n@@ -18,8 +18,8 @@ describe(\'Directive: commit-list\', function () {\n     commits = $injector.get(\'commits\');\n     commentCollector = $injector.get(\'commentCollector\');\n \n-    var filterProvider = $injector.get(\'filterProvider\');\n-    filter = filterProvider.getNew();\n+    var filterService = $injector.get(\'filter\');\n+    filter = filterService.getNew();\n   }));\n \n   it(\'Should call commentCollector.getCommitApproved on init\', function () {'
        },
        {
          'sha': '75f3f8f5214b5e4ece368e75e200f164ef7a198e',
          'filename': 'client/app/filter/filter.controller.js',
          'status': 'modified',
          'additions': 42,
          'deletions': 42,
          'changes': 84,
          'blob_url': 'https://github.com/Dica-Developer/gh-review/blob/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/app/filter/filter.controller.js',
          'raw_url': 'https://github.com/Dica-Developer/gh-review/raw/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/app/filter/filter.controller.js',
          'contents_url': 'https://api.github.com/repos/Dica-Developer/gh-review/contents/client/app/filter/filter.controller.js?ref=6ff8da937f901a1ff470e84d663161a3446cb8b7',
          'patch': '@@ -9,10 +9,10 @@\n       \'$timeout\',\n       \'_\',\n       \'repoCollector\',\n-      \'filterProvider\',\n-      function ($scope, $q, $stateParams, $timeout, _, repoCollector, filterProvider) {\n+      \'filter\',\n+      function ($scope, $q, $stateParams, $timeout, _, repoCollector, filter) {\n         var orgFilter = null,\n-          filter = null,\n+          _filter = null,\n           branchList = null,\n           contributorList = null,\n           repoList = null,\n@@ -22,13 +22,13 @@\n         controller.isExistingFilter = function () {\n           var defer = $q.defer();\n           if (!angular.isUndefined($stateParams.filterId)) { //We are in the edit state\n-            orgFilter = filterProvider.get($stateParams.filterId);\n-            filter = filterProvider.getCloneOf(orgFilter);\n+            orgFilter = filter.getById($stateParams.filterId);\n+            _filter = filter.getCloneOf(orgFilter);\n             defer.resolve();\n           } else {\n-            filter = filterProvider.getNew();\n+            _filter = filter.getNew();\n             //Set initial to new Filter to reduce commit size\n-            filter.setSince({\n+            _filter.setSince({\n               pattern: \'weeks\',\n               amount: 2\n             });\n@@ -54,7 +54,7 @@\n             return $q.when();\n           };\n \n-          $q.all([filter.getBranchList(), filter.getContributorList(), repoCollector.getAll(), filter.getTree()])\n+          $q.all([_filter.getBranchList(), _filter.getContributorList(), repoCollector.getAll(), _filter.getTree()])\n             .then(setResults, function (e) {\n               controller.handleError(e);\n               return $q.reject();\n@@ -63,29 +63,29 @@\n         };\n \n         controller.setCurrentPage = function (newValue) {\n-          filter.setCurrentPage(newValue);\n-          controller.setCommits(filter.getPage());\n+          _filter.setCurrentPage(newValue);\n+          controller.setCommits(_filter.getPage());\n         };\n \n         controller.setScopeVariables = function () {\n-          var repoSetInFilter = filter.getRepo();\n-          var branchSetInFilter = filter.getBranch();\n-          var contributorSetInFilter = filter.getAuthors();\n-          var sinceSetInFilter = filter.getSince();\n+          var repoSetInFilter = _filter.getRepo();\n+          var branchSetInFilter = _filter.getBranch();\n+          var contributorSetInFilter = _filter.getAuthors();\n+          var sinceSetInFilter = _filter.getSince();\n \n           $scope.scope = $scope;\n-          $scope.currentPage = filter.getCurrentPage();\n-          $scope.excludeOwnCommits = filter.getExcludeOwnCommits();\n-          $scope.filterPath = filter.getPath();\n+          $scope.currentPage = _filter.getCurrentPage();\n+          $scope.excludeOwnCommits = _filter.getExcludeOwnCommits();\n+          $scope.filterPath = _filter.getPath();\n           $scope.showAdvanced = false;\n-          $scope.filter = filter;\n+          $scope.filter = _filter;\n           $scope.allRepos = repoList;\n           $scope.branches = branchList;\n           $scope.contributorList = contributorList;\n           $scope.repoTree = repoTree;\n           $scope.availableFilterSincePattern = [\'days\', \'weeks\', \'years\'];\n           $scope.availableFilterReviewStates = [\'unseen\', \'reviewed\', \'approved\'];\n-          $scope.filterReviewState = $scope.availableFilterReviewStates[$scope.availableFilterReviewStates.indexOf(filter.getState())] || null;\n+          $scope.filterReviewState = $scope.availableFilterReviewStates[$scope.availableFilterReviewStates.indexOf(_filter.getState())] || null;\n \n           if ($scope.branches) {\n             $scope.branchSelection = _.pluck(branchList, \'name\');\n@@ -128,10 +128,10 @@\n             if (newSelectedBranch && newSelectedBranch !== oldSelectedBranch) {\n               $scope.commits = [];\n               $scope.contributorList = [];\n-              filter.setBranch(newSelectedBranch);\n+              _filter.setBranch(newSelectedBranch);\n               controller.getCommitList();\n               controller.getContributorList();\n-              filter.getTree()\n+              _filter.getTree()\n                 .then(function (treeData) {\n                   $scope.repoTree = repoTree = treeData;\n                 });\n@@ -140,12 +140,12 @@\n \n           $scope.$watch(\'selectedRepo\', function (newSelectedRepo, oldSelectedRepo) {\n             if (newSelectedRepo && (newSelectedRepo !== oldSelectedRepo)) {\n-              filter.setRepo(newSelectedRepo.name);\n-              filter.setOwner(newSelectedRepo.owner.login);\n+              _filter.setRepo(newSelectedRepo.name);\n+              _filter.setOwner(newSelectedRepo.owner.login);\n               $scope.branchSelection = [];\n               $scope.selectedBranch = null;\n               $scope.fetchingBranches = true;\n-              filter.getBranchList()\n+              _filter.getBranchList()\n                 .then(controller.setBranchSelection);\n             }\n           });\n@@ -181,7 +181,7 @@\n \n         controller.setCommits = function (commits) {\n           $scope.commits = commits;\n-          $scope.commitsLength = filter.getTotalCommitsLength();\n+          $scope.commitsLength = _filter.getTotalCommitsLength();\n           $scope.fetchingCommits = false;\n           return $q.when();\n         };\n@@ -201,7 +201,7 @@\n         controller.getCommitList = function () {\n           $scope.fetchingCommits = true;\n           $scope.commits = [];\n-          filter.getCommits()\n+          _filter.getCommits()\n             .then(controller.setCommits, controller.handleError, controller.setCommits);\n         };\n \n@@ -211,7 +211,7 @@\n         };\n \n         controller.getContributorList = function () {\n-          return filter.getContributorList()\n+          return _filter.getContributorList()\n             .then(controller.setContributorList);\n         };\n \n@@ -225,12 +225,12 @@\n \n           if (shouldCheck) {\n             var updated = false;\n-            var contributorList = filter.getAuthors();\n-            var filterSincePattern = filter.getSince().pattern;\n-            var filterSinceAmount = filter.getSince().amount;\n-            var filterExcludeOwnCommits = filter.getExcludeOwnCommits();\n-            var filterReviewState = filter.getState() || null;\n-            var filterPath = filter.getPath();\n+            var contributorList = _filter.getAuthors();\n+            var filterSincePattern = _filter.getSince().pattern;\n+            var filterSinceAmount = _filter.getSince().amount;\n+            var filterExcludeOwnCommits = _filter.getExcludeOwnCommits();\n+            var filterReviewState = _filter.getState() || null;\n+            var filterPath = _filter.getPath();\n \n             var selectedContributor = [];\n             contributorList.forEach(function (contributor) {\n@@ -266,14 +266,14 @@\n         };\n \n         $scope.updateCommits = function () {\n-          filter.addAuthor(_.pluck($scope.selectedContributor, \'login\'));\n-          filter.setSince({\n+          _filter.addAuthor(_.pluck($scope.selectedContributor, \'login\'));\n+          _filter.setSince({\n             pattern: $scope.filterSincePattern,\n             amount: $scope.filterSinceAmount\n           });\n-          filter.setExcludeOwnCommits($scope.excludeOwnCommits);\n-          filter.setState($scope.filterReviewState);\n-          filter.setPath($scope.filterPath);\n+          _filter.setExcludeOwnCommits($scope.excludeOwnCommits);\n+          _filter.setState($scope.filterReviewState);\n+          _filter.setPath($scope.filterPath);\n           $scope.settingsUpdated = false;\n           controller.getCommitList();\n         };\n@@ -283,16 +283,16 @@\n         };\n \n         $scope.filterIsSaved = function () {\n-          return filter.isSaved();\n+          return _filter.isSaved();\n         };\n \n         $scope.saveFilter = function () {\n-          filter.save();\n+          _filter.save();\n         };\n \n         $scope.reset = function () {\n-          filter.reset();\n-          filter.setSince({\n+          _filter.reset();\n+          _filter.setSince({\n             pattern: \'weeks\',\n             amount: 2\n           });'
        },
        {
          'sha': 'eee50695b2b7484e2a52f506207dc7f37e33c21f',
          'filename': 'client/app/filter/filter.controller.spec.js',
          'status': 'modified',
          'additions': 31,
          'deletions': 30,
          'changes': 61,
          'blob_url': 'https://github.com/Dica-Developer/gh-review/blob/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/app/filter/filter.controller.spec.js',
          'raw_url': 'https://github.com/Dica-Developer/gh-review/raw/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/app/filter/filter.controller.spec.js',
          'contents_url': 'https://api.github.com/repos/Dica-Developer/gh-review/contents/client/app/filter/filter.controller.spec.js?ref=6ff8da937f901a1ff470e84d663161a3446cb8b7',
          'patch': '@@ -1,7 +1,7 @@\n describe(\'Controller: FilterController\', function () {\n   \'use strict\';\n \n-  beforeEach(angular.mock.module(\'GHReview\'));\n+  beforeEach(module(\'GHReview\'));\n \n   describe(\'With new filter\', function () {\n     var $rootScope, $scope, $q, _$injector;\n@@ -18,28 +18,28 @@ describe(\'Controller: FilterController\', function () {\n     });\n \n     it(\'Should call filterProvider.getNew if no filter id is given\', function () {\n-      var filterProvider = _$injector.get(\'filterProvider\');\n+      var filter = _$injector.get(\'filter\');\n \n-      spyOn(filterProvider, \'getNew\').and.callThrough();\n+      spyOn(filter, \'getNew\').and.callThrough();\n \n       var $controller = _$injector.get(\'$controller\');\n       $controller(\'FilterController\', {\n         \'$scope\': $scope,\n-        filterProvider: filterProvider\n+        filter: filter\n       });\n \n-      expect(filterProvider.getNew).toHaveBeenCalled();\n+      expect(filter.getNew).toHaveBeenCalled();\n     });\n \n     it(\'Should set filter since to \"2 weeks\"\', function () {\n-      var filterProvider = _$injector.get(\'filterProvider\');\n-      var mockedFilter = filterProvider.getNew();\n-      spyOn(filterProvider, \'getNew\').and.returnValue(mockedFilter);\n+      var filter = _$injector.get(\'filter\');\n+      var mockedFilter = filter.getNew();\n+      spyOn(filter, \'getNew\').and.returnValue(mockedFilter);\n \n       var $controller = _$injector.get(\'$controller\');\n       $controller(\'FilterController\', {\n         \'$scope\': $scope,\n-        filterProvider: filterProvider\n+        filter: filter\n       });\n \n       expect(mockedFilter.getSince()).toEqual({pattern: \'weeks\', amount: 2});\n@@ -63,19 +63,19 @@ describe(\'Controller: FilterController\', function () {\n \n     it(\'Should set $scope variables and \"$scope.fetchingRepos\" to true\', function () {\n       var repoCollector = _$injector.get(\'repoCollector\');\n-      var filterProvider = _$injector.get(\'filterProvider\');\n-      var mockedFilter = filterProvider.getNew();\n+      var filter = _$injector.get(\'filter\');\n+      var mockedFilter = filter.getNew();\n \n       spyOn(repoCollector, \'getAll\').and.returnValue($q.when([\n         {name: \'TestRepo\'}\n       ]));\n-      spyOn(filterProvider, \'getNew\').and.returnValue(mockedFilter);\n+      spyOn(filter, \'getNew\').and.returnValue(mockedFilter);\n \n       var $controller = _$injector.get(\'$controller\');\n       $controller(\'FilterController\', {\n         \'$scope\': $scope,\n         repoCollector: repoCollector,\n-        filterProvider: filterProvider\n+        filter: filter\n       });\n \n       $rootScope.$apply();\n@@ -103,19 +103,19 @@ describe(\'Controller: FilterController\', function () {\n       var mockedFilter, controller;\n       beforeEach(function () {\n         var repoCollector = _$injector.get(\'repoCollector\');\n-        var filterProvider = _$injector.get(\'filterProvider\');\n-        mockedFilter = filterProvider.getNew();\n+        var filter = _$injector.get(\'filter\');\n+        mockedFilter = filter.getNew();\n \n         spyOn(repoCollector, \'getAll\').and.returnValue($q.when([\n           {name: \'TestRepo\'}\n         ]));\n-        spyOn(filterProvider, \'getNew\').and.returnValue(mockedFilter);\n+        spyOn(filter, \'getNew\').and.returnValue(mockedFilter);\n \n         var $controller = _$injector.get(\'$controller\');\n         controller = $controller(\'FilterController\', {\n           \'$scope\': $scope,\n           repoCollector: repoCollector,\n-          filterProvider: filterProvider\n+          filter: filter\n         });\n       });\n \n@@ -189,23 +189,23 @@ describe(\'Controller: FilterController\', function () {\n     });\n \n     describe(\'Controller functions\', function () {\n-      var filterProvider, repoCollector, mockedFilter, controller, stateParams = {};\n+      var filter, repoCollector, mockedFilter, controller, stateParams = {};\n       beforeEach(function () {\n         repoCollector = _$injector.get(\'repoCollector\');\n-        filterProvider = _$injector.get(\'filterProvider\');\n-        mockedFilter = filterProvider.getNew();\n+        filter = _$injector.get(\'filter\');\n+        mockedFilter = filter.getNew();\n \n         spyOn(repoCollector, \'getAll\').and.returnValue($q.when([\n           {name: \'TestRepo\'}\n         ]));\n-        spyOn(filterProvider, \'getNew\').and.returnValue(mockedFilter);\n-        spyOn(filterProvider, \'get\').and.returnValue(mockedFilter);\n+        spyOn(filter, \'getNew\').and.returnValue(mockedFilter);\n+        spyOn(filter, \'getById\').and.returnValue(mockedFilter);\n \n         var $controller = _$injector.get(\'$controller\');\n         controller = $controller(\'FilterController\', {\n           \'$scope\': $scope,\n           repoCollector: repoCollector,\n-          filterProvider: filterProvider,\n+          filter: filter,\n           $stateParams: stateParams\n         });\n       });\n@@ -213,7 +213,7 @@ describe(\'Controller: FilterController\', function () {\n       it(\'controller.isExistingFilter should reject if stateParams has no filter id\', function (done) {\n         controller.isExistingFilter()\n           .then(null, function () {\n-            expect(filterProvider.getNew).toHaveBeenCalled();\n+            expect(filter.getNew).toHaveBeenCalled();\n             done();\n           });\n \n@@ -221,10 +221,10 @@ describe(\'Controller: FilterController\', function () {\n       });\n \n       it(\'controller.isExistingFilter should resolve if stateParams has filter id\', function (done) {\n-        stateParams.filterId = \'filterId\';\n+        stateParams.filterId = \'existing-filter\';\n         controller.isExistingFilter()\n           .then(function () {\n-            expect(filterProvider.get).toHaveBeenCalledWith(\'filterId\');\n+            expect(filter.getById).toHaveBeenCalledWith(\'existing-filter\');\n             delete stateParams.filterId;\n             done();\n           });\n@@ -324,19 +324,20 @@ describe(\'Controller: FilterController\', function () {\n \n       beforeEach(function () {\n         var repoCollector = _$injector.get(\'repoCollector\');\n-        var filterProvider = _$injector.get(\'filterProvider\');\n-        var mockedFilter = filterProvider.getNew();\n+        var filter = _$injector.get(\'filter\');\n+        var mockedFilter = filter.getNew();\n \n         spyOn(repoCollector, \'getAll\').and.returnValue($q.when([\n           {name: \'TestRepo\'}\n         ]));\n-        spyOn(filterProvider, \'getNew\').and.returnValue(mockedFilter);\n+\n+        spyOn(filter, \'getNew\').and.returnValue(mockedFilter);\n \n         var $controller = _$injector.get(\'$controller\');\n         controller = $controller(\'FilterController\', {\n           \'$scope\': $scope,\n           repoCollector: repoCollector,\n-          filterProvider: filterProvider\n+          filter: filter\n         });\n \n         spyOn(controller, \'checkIfSettingAreUpdated\').and.callThrough();'
        },
        {
          'sha': '22109c111cdc37bdd48e2157b33eca13ff65cb47',
          'filename': 'client/components/filter/Filter.factory.js',
          'status': 'renamed',
          'additions': 34,
          'deletions': 64,
          'changes': 98,
          'blob_url': 'https://github.com/Dica-Developer/gh-review/blob/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/components/filter/Filter.factory.js',
          'raw_url': 'https://github.com/Dica-Developer/gh-review/raw/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/components/filter/Filter.factory.js',
          'contents_url': 'https://api.github.com/repos/Dica-Developer/gh-review/contents/client/components/filter/Filter.factory.js?ref=6ff8da937f901a1ff470e84d663161a3446cb8b7',
          'patch': '@@ -3,24 +3,21 @@\n \n \n   var services = angular.module(\'GHReview\');\n-  services.factory(\'filterProvider\', [\n-    \'$q\',\n-    \'$location\',\n-    \'$log\',\n-    \'_\',\n-    \'moment\',\n-    \'github\',\n-    \'commentCollector\',\n-    \'localStorageService\',\n-    \'githubUserData\',\n-    \'branchCollector\',\n-    \'contributorCollector\',\n-    \'commitCollector\',\n-    \'treeCollector\',\n-    function ($q, $location, $log, _, moment, github, commentCollector, localStorageService, githubUserData, branchCollector, contributorCollector, commitCollector, treeCollector) {\n-\n-      var filterHolder = {},\n-        generateUUID = function () {\n+  services.factory(\'Filter\', [\'$injector\', function ($injector) {\n+\n+    var $q = $injector.get(\'$q\'),\n+      $location = $injector.get(\'$location\'),\n+      _ = $injector.get(\'_\'),\n+      moment = $injector.get(\'moment\'),\n+      commentCollector = $injector.get(\'commentCollector\'),\n+      localStorageService = $injector.get(\'localStorageService\'),\n+      githubUserData = $injector.get(\'githubUserData\'),\n+      branchCollector = $injector.get(\'branchCollector\'),\n+      contributorCollector = $injector.get(\'contributorCollector\'),\n+      commitCollector = $injector.get(\'commitCollector\'),\n+      treeCollector = $injector.get(\'treeCollector\');\n+\n+      var generateUUID = function () {\n           var d = new Date().getTime();\n           return \'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\'.replace(/[xy]/g, function (c) {\n             var r = (d + Math.random() * 16) % 16 | 0;\n@@ -69,28 +66,25 @@\n \n       Filter.prototype.save = function () {\n         if (this.options.meta.isClone) {\n-          var originalfilter = filterHolder[this.options.meta.idOriginal];\n-          originalfilter.options = _.cloneDeep(this.options);\n-          originalfilter.options.meta.id = originalfilter.options.meta.idOriginal;\n-          delete originalfilter.options.meta.idOriginal;\n-          delete originalfilter.options.meta.isClone;\n-          originalfilter.save();\n-        } else {\n-          if (!_.isUndefined(this.options.meta.isNew)) {\n-            delete this.options.meta.isNew;\n-          }\n-          this.options.meta.isSaved = true;\n-          var filterIdsString = localStorageService.get(\'filter\');\n-          var filterIds = [];\n-          if (!_.isNull(filterIdsString)) {\n-            filterIds = filterIdsString.split(\',\');\n-          }\n-          if (!_.contains(filterIds, this.options.meta.id)) {\n-            filterIds.push(this.options.meta.id);\n-            localStorageService.set(\'filter\', filterIds.join(\',\'));\n-          }\n-          localStorageService.set(\'filter-\' + this.options.meta.id, JSON.stringify(this.options));\n+          this.options.meta.id = this.options.meta.originalId;\n+          delete this.options.meta.originalId;\n+          delete this.options.meta.isClone;\n+        }\n+\n+        if (!_.isUndefined(this.options.meta.isNew)) {\n+          delete this.options.meta.isNew;\n         }\n+        this.options.meta.isSaved = true;\n+        var filterIdsString = localStorageService.get(\'filter\');\n+        var filterIds = [];\n+        if (!_.isNull(filterIdsString)) {\n+          filterIds = filterIdsString.split(\',\');\n+        }\n+        if (!_.contains(filterIds, this.options.meta.id)) {\n+          filterIds.push(this.options.meta.id);\n+          localStorageService.set(\'filter\', filterIds.join(\',\'));\n+        }\n+        localStorageService.set(\'filter-\' + this.options.meta.id, JSON.stringify(this.options));\n       };\n \n       Filter.prototype.set = function (key, value) {\n@@ -438,31 +432,7 @@\n         return defer.promise;\n       };\n \n-      return {\n-        get: function (id) {\n-          if (!filterHolder[id]) {\n-            filterHolder[id] = new Filter(id);\n-          }\n-          return filterHolder[id];\n-        },\n-        getNew: function () {\n-          var newFilter = new Filter();\n-          filterHolder[newFilter.getId()] = newFilter;\n-          return newFilter;\n-        },\n-        getCloneOf: function (filter) {\n-          if (filter instanceof Filter) {\n-            var clonedFilter = new Filter();\n-            clonedFilter.options = _.cloneDeep(filter.options);\n-            clonedFilter.options.meta.idOriginal = clonedFilter.options.meta.id;\n-            clonedFilter.options.meta.id = clonedFilter.options.meta.id + \'_clone\';\n-            clonedFilter.options.meta.isClone = true;\n-            return clonedFilter;\n-          } else {\n-            $log.error(\'No Filter\');\n-          }\n-        }\n-      };\n+      return Filter;\n     }\n   ]);\n }(angular));\n\\ No newline at end of file'
        },
        {
          'sha': '6b125c19454aec190e30d5dff321f10924617796',
          'filename': 'client/components/filter/Filter.factory.spec.js',
          'status': 'renamed',
          'additions': 54,
          'deletions': 80,
          'changes': 134,
          'blob_url': 'https://github.com/Dica-Developer/gh-review/blob/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/components/filter/Filter.factory.spec.js',
          'raw_url': 'https://github.com/Dica-Developer/gh-review/raw/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/components/filter/Filter.factory.spec.js',
          'contents_url': 'https://api.github.com/repos/Dica-Developer/gh-review/contents/client/components/filter/Filter.factory.spec.js?ref=6ff8da937f901a1ff470e84d663161a3446cb8b7',
          'patch': '@@ -1,6 +1,6 @@\n /*global _, inject, moment*/\n \n-describe(\'Service: filterProvider\', function () {\n+describe(\'Factory: Filter\', function () {\n   \'use strict\';\n \n   var filterOptions = {\n@@ -16,62 +16,61 @@ describe(\'Service: filterProvider\', function () {\n       \'customFilter\': {\n         \'state\': \'approved\'\n       },\n-      \'id\': \'filterId\',\n+      \'id\': \'existing-filter\',\n       isSaved: true\n     }\n-  };\n+  },\n+    Filter, localStorageService, branchCollector, contributorCollector, treeCollector, commentCollector;\n \n   beforeEach(module(\'GHReview\'));\n+  beforeEach(module(\'commitMockModule\'));\n+\n+  beforeEach(inject(function($injector){\n+    Filter = $injector.get(\'Filter\');\n+    localStorageService = $injector.get(\'localStorageService\');\n+    branchCollector = $injector.get(\'branchCollector\');\n+    contributorCollector = $injector.get(\'contributorCollector\');\n+    treeCollector = $injector.get(\'treeCollector\');\n+    commentCollector = $injector.get(\'commentCollector\');\n+    window.localStorage.setItem(\'ghreview.filter-existing-filter\', JSON.stringify(filterOptions));\n+  }));\n+\n+  afterEach(function(){\n+    window.localStorage.removeItem(\'ghreview.filter-existing-filter\');\n+  });\n \n-  it(\'Should be defined\', inject([\'filterProvider\',\n-    function (filterProvider) {\n-      expect(filterProvider).toBeDefined();\n-    }\n-  ]));\n+  it(\'Should be defined\', function () {\n+    expect(Filter).toBeDefined();\n+  });\n \n   describe(\'#Filter.init\', function () {\n \n-    it(\'Should set new id if not provided\', inject([\'filterProvider\',\n-      function (filterProvider) {\n-        var filter = filterProvider.getNew();\n+    it(\'Should set new id if not provided\', function () {\n+        var filter = new Filter();\n         expect(filter.options.id).not.toBeNull();\n-      }\n-    ]));\n+    });\n \n-    it(\'Should call localStorageService if filterId is provided\', inject([\'filterProvider\', \'localStorageService\', \'branchCollector\', \'contributorCollector\', \'treeCollector\',\n-      function (filterProvider, localStorageService, branchCollector, contributorCollector, treeCollector) {\n+    it(\'Should call localStorageService if filterId is provided\', function () {\n         spyOn(branchCollector, \'get\');\n         spyOn(contributorCollector, \'get\');\n         spyOn(treeCollector, \'get\');\n         spyOn(localStorageService, \'get\');\n-        filterProvider.get(\'filterId\');\n+        new Filter(\'filterId\');\n         expect(localStorageService.get).toHaveBeenCalledWith(\'filter-filterId\');\n-      }\n-    ]));\n+    });\n \n-    it(\'Should set options to what localStorageService returns\', inject([\'filterProvider\',\n-      function (filterProvider) {\n-        window.localStorage.setItem(\'ghreview.filter-filterId\', JSON.stringify(filterOptions));\n-        var filter = filterProvider.get(\'filterId\');\n+    it(\'Should set options to what localStorageService returns\', function () {\n+        var filter = new Filter(\'existing-filter\');\n         _.each(filterOptions, function (value, key) {\n           expect(filter.options[key]).toEqual(value);\n         });\n-        window.localStorage.removeItem(\'ghreview.filter-filterId\');\n-      }\n-    ]));\n-\n+    });\n   });\n \n   describe(\'setter\', function () {\n     var filter;\n-    beforeEach(inject([\'filterProvider\',\n-      function (filterProvider) {\n-        window.localStorage.setItem(\'ghreview.filter-filterId\', JSON.stringify(filterOptions));\n-        filter = filterProvider.get(\'filterId\');\n-      }\n-    ]));\n-    afterEach(function () {\n-      window.localStorage.removeItem(\'ghreview.filter-filterId\');\n+    beforeEach(function () {\n+      filter = new Filter(\'existing-filter\');\n     });\n \n     it(\'.set should set given value to given key\', function () {\n@@ -179,15 +178,8 @@ describe(\'Service: filterProvider\', function () {\n \n   describe(\'getter\', function () {\n     var filter;\n-    beforeEach(inject([\'filterProvider\',\n-      function (filterProvider) {\n-        window.localStorage.setItem(\'ghreview.filter-filterId\', JSON.stringify(filterOptions));\n-        filter = filterProvider.get(\'filterId\');\n-      }\n-    ]));\n-\n-    afterEach(function () {\n-      window.localStorage.removeItem(\'ghreview.filter-filterId\');\n+    beforeEach(function () {\n+      filter = new Filter(\'existing-filter\');\n     });\n \n     it(\'getId should return current id\', function () {\n@@ -258,65 +250,51 @@ describe(\'Service: filterProvider\', function () {\n   });\n \n   describe(\'#Filter.save\', function () {\n-    var filter, lSS;\n-    beforeEach(inject([\'filterProvider\', \'localStorageService\',\n-      function (filterProvider, localStorageService) {\n-        window.localStorage.setItem(\'ghreview.filter-filterId\', JSON.stringify(filterOptions));\n-        filter = filterProvider.get(\'filterId\');\n-        lSS = localStorageService;\n-      }\n-    ]));\n-\n-    afterEach(function () {\n-      window.localStorage.removeItem(\'ghreview.filter-filterId\');\n+    var filter;\n+    beforeEach(function () {\n+        filter = new Filter(\'existing-filter\');\n     });\n \n     it(\'Should call localStorageService to filterId to id array\', function () {\n-      spyOn(lSS, \'get\').and.returnValue(\'filter1,filter2\');\n-      spyOn(lSS, \'set\');\n+      spyOn(localStorageService, \'get\').and.returnValue(\'filter1,filter2\');\n+      spyOn(localStorageService, \'set\');\n       filter.save();\n-      expect(lSS.set.calls.argsFor(0)).toEqual([\'filter\', \'filter1,filter2,filterId\']);\n+      expect(localStorageService.set.calls.argsFor(0)).toEqual([\'filter\', \'filter1,filter2,existing-filter\']);\n     });\n \n     it(\'Should call localStorageService.set  to add filter to localStorage\', function () {\n-      spyOn(lSS, \'get\').and.returnValue(\'filter1,filter2\');\n-      spyOn(lSS, \'set\');\n+      spyOn(localStorageService, \'get\').and.returnValue(\'filter1,filter2\');\n+      spyOn(localStorageService, \'set\');\n       filter.save();\n-      expect(lSS.set.calls.argsFor(1)).toEqual([\'filter-filterId\', JSON.stringify(filter.options)]);\n+      expect(localStorageService.set.calls.argsFor(1)).toEqual([\'filter-existing-filter\', JSON.stringify(filter.options)]);\n     });\n \n     it(\'Should call localStorageService.set to add filter to localStorage even it is the first filter\', function () {\n-      spyOn(lSS, \'get\').and.returnValue(null);\n-      spyOn(lSS, \'set\');\n+      spyOn(localStorageService, \'get\').and.returnValue(null);\n+      spyOn(localStorageService, \'set\');\n       filter.save();\n-      expect(lSS.set.calls.argsFor(1)).toEqual([\'filter-filterId\', JSON.stringify(filter.options)]);\n+      expect(localStorageService.set.calls.argsFor(1)).toEqual([\'filter-existing-filter\', JSON.stringify(filter.options)]);\n     });\n \n     it(\'Should call localStorageService.get to get current filter list\', function () {\n-      spyOn(lSS, \'get\').and.returnValue(\'filter1,filter2\');\n-      spyOn(lSS, \'set\');\n+      spyOn(localStorageService, \'get\').and.returnValue(\'filter1,filter2\');\n+      spyOn(localStorageService, \'set\');\n       filter.save();\n-      expect(lSS.get).toHaveBeenCalledWith(\'filter\');\n+      expect(localStorageService.get).toHaveBeenCalledWith(\'filter\');\n     });\n   });\n \n   describe(\'core functions\', function () {\n-    var filter, $q, github, $rootScope, contributorCollector;\n+    var filter, $q, github, $rootScope;\n     beforeEach(inject(function ($injector) {\n-      window.localStorage.setItem(\'ghreview.filter-filterId\', JSON.stringify(filterOptions));\n       window.localStorage.setItem(\'ls.accessToken\', \'abc\');\n-\n       $q = $injector.get(\'$q\');\n       github = $injector.get(\'github\');\n-      contributorCollector = $injector.get(\'contributorCollector\');\n       $rootScope = $injector.get(\'$rootScope\');\n-      var filterProvider = $injector.get(\'filterProvider\');\n-      filter = filterProvider.get(\'filterId\');\n-\n+      filter = new Filter(\'existing-filter\');\n     }));\n \n     afterEach(function () {\n-      window.localStorage.removeItem(\'ghreview.filter-filterId\');\n       window.localStorage.removeItem(\'ls.accessToken\');\n     });\n \n@@ -432,18 +410,14 @@ describe(\'Service: filterProvider\', function () {\n   });\n \n   describe(\'Filter._processCustomFilter\', function () {\n-    var filter, commits, $rootScope, commentCollector, githubUserData, $q;\n-\n-    beforeEach(angular.mock.module(\'commitMockModule\'));\n+    var filter, commits, $rootScope, githubUserData, $q;\n \n     beforeEach(inject(function ($injector) {\n       $rootScope = $injector.get(\'$rootScope\');\n       $q = $injector.get(\'$q\');\n       commits = $injector.get(\'commits\');\n-      commentCollector = $injector.get(\'commentCollector\');\n       githubUserData = $injector.get(\'githubUserData\');\n-      var filterProvider = $injector.get(\'filterProvider\');\n-      filter = filterProvider.getNew();\n+      filter = new Filter();\n     }));\n \n     it(\'Should set commitList to given commits if no filtering is needed\', function (done) {'
        },
        {
          'sha': '7386f9d193a825fb56595b27ce46e3affa204607',
          'filename': 'client/components/filter/filter.service.js',
          'status': 'modified',
          'additions': 38,
          'deletions': 18,
          'changes': 56,
          'blob_url': 'https://github.com/Dica-Developer/gh-review/blob/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/components/filter/filter.service.js',
          'raw_url': 'https://github.com/Dica-Developer/gh-review/raw/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/components/filter/filter.service.js',
          'contents_url': 'https://api.github.com/repos/Dica-Developer/gh-review/contents/client/components/filter/filter.service.js?ref=6ff8da937f901a1ff470e84d663161a3446cb8b7',
          'patch': '@@ -2,25 +2,53 @@\n   \'use strict\';\n \n \n-  angular.module(\'GHReview\').factory(\'filter\', [\'_\', \'localStorageService\', \'filterProvider\',\n-    function (_, localStorageService, filterProvider) {\n-\n-      var getAll = function () {\n-        var filter = [];\n-        var filterIds = localStorageService.get(\'filter\');\n+  angular.module(\'GHReview\').service(\'filter\', [\'$log\', \'_\', \'localStorageService\', \'Filter\',\n+    function ($log, _, localStorageService, Filter) {\n+\n+      var filterCache = {},\n+        fastClone = function(objectToClone){\n+          return JSON.parse(JSON.stringify((objectToClone)));\n+        };\n+\n+      this.getAll = function () {\n+        var self = this,\n+          filter = [],\n+          filterIds = localStorageService.get(\'filter\');\n         if (filterIds !== null) {\n           filterIds.split(\',\').forEach(function (id) {\n-            filter.push(filterProvider.get(id));\n+            filter.push(self.getById(id));\n           });\n         }\n         return filter;\n       };\n \n-      var getById = function (filterId) {\n-        return filterProvider.get(filterId);\n+      this.getById = function (filterId) {\n+        if (!filterCache[filterId]) {\n+          filterCache[filterId] = new Filter(filterId);\n+        }\n+        return filterCache[filterId];\n+      };\n+\n+      this.getNew = function(){\n+        var newFilter = new Filter();\n+        filterCache[newFilter.getId()] = newFilter;\n+        return newFilter;\n       };\n \n-      var remove = function (filterId) {\n+      this.getCloneOf = function(filter){\n+        if (filter instanceof Filter) {\n+          var clonedFilter = new Filter();\n+          clonedFilter.options = fastClone(filter.options);\n+          clonedFilter.options.meta.originalId = filter.options.meta.id;\n+          clonedFilter.options.meta.id = clonedFilter.options.meta.id + \'_clone\';\n+          clonedFilter.options.meta.isClone = true;\n+          return clonedFilter;\n+        } else {\n+          $log.error(\'No Filter\');\n+        }\n+      };\n+\n+      this.remove = function (filterId) {\n         localStorageService.remove(\'filter-\' + filterId);\n         var filterList = localStorageService.get(\'filter\').split(\',\');\n         _.remove(filterList, function (value) {\n@@ -28,14 +56,6 @@\n         });\n         localStorageService.set(\'filter\', filterList.join(\',\'));\n       };\n-\n-      return {\n-        getAll: getAll,\n-        getById: getById,\n-        remove: remove\n-      };\n-\n     }\n   ]);\n-\n }(angular));\n\\ No newline at end of file'
        },
        {
          'sha': '4d51d344ffe55a00e89dba3bbd64e021cad49653',
          'filename': 'client/index.html',
          'status': 'modified',
          'additions': 1,
          'deletions': 1,
          'changes': 2,
          'blob_url': 'https://github.com/Dica-Developer/gh-review/blob/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/index.html',
          'raw_url': 'https://github.com/Dica-Developer/gh-review/raw/6ff8da937f901a1ff470e84d663161a3446cb8b7/client/index.html',
          'contents_url': 'https://api.github.com/repos/Dica-Developer/gh-review/contents/client/index.html?ref=6ff8da937f901a1ff470e84d663161a3446cb8b7',
          'patch': '@@ -77,7 +77,7 @@\n <script src="components/commit/commit-unapprove.service.js"></script>\n <script src="components/contributor/contributor-collector.service.js"></script>\n <script src="components/events/events.service.js"></script>\n-<script src="components/filter/filter-provider.service.js"></script>\n+<script src="components/filter/Filter.factory.js"></script>\n <script src="components/filter/filter.service.js"></script>\n <script src="components/github/github-commits.service.js"></script>\n <script src="components/github/github-file.service.js"></script>'
        }
      ]
    }
  ]);
