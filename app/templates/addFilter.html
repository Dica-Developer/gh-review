{{filter}}

<div class="row">
    <div class="col-sm-8">
        <div class="well well-sm">List of repositorys you have access</div>
        <div>
            <div id="table-data-count">
                <span class="filter-count"></span> selected out of <span class="total-count"></span> records | <a
                    href="javascript:dc.filterAll(); dc.renderAll();">Reset All</a>
            </div>
            <div id="table-data-group" class="pull-right">
                <label for="tableGroup">Grouped by: </label>
                <select id="tableGroup">
                    <option value="access">Access</option>
                    <option value="owner">Owner</option>
                    <option value="created">Created (Year/Month)</option>
                    <option value="updated">Updated (Year/Month)</option>
                </select>
            </div>
        </div>

        <div class="clearfix"></div>
        <div class="table-responsive" id="repo-data-table-container">
            <table id="repo-data-table" class="table table-striped table-bordered table-condensed table-hover"
                   ng-click="selectRepo($event)">
                <thead>
                <tr class="header">
                    <th class="sortRepoTable" data-sortby="full_name" data-sortdir="descending">
                        Fullname
                        <span class="glyphicon glyphicon-sort-by-alphabet-alt pull-right sorticon descending"
                              style="display:none;"></span>
                        <span class="glyphicon glyphicon-sort-by-alphabet pull-right sorticon ascending"
                              style="display:none;"></span>
                    </th>
                    <th class="sortRepoTable" data-sortby="created" data-sortdir="descending">
                        Created at
                        <span class="glyphicon glyphicon-sort-by-order-alt pull-right sorticon descending"
                              style="display:none;"></span>
                        <span class="glyphicon glyphicon-sort-by-order pull-right sorticon ascending"
                              style="display:none;"></span>
                    </th>
                    <th class="sortRepoTable" data-sortby="updated" data-sortdir="descending">
                        Updated at
                        <span class="glyphicon glyphicon-sort-by-order-alt pull-right sorticon descending"></span>
                        <span class="glyphicon glyphicon-sort-by-order pull-right sorticon ascending"
                              style="display:none;"></span>
                    </th>
                    <th class="sortRepoTable" data-sortby="open_issues_count" data-sortdir="descending">
                        Open Issues
                        <span class="glyphicon glyphicon-sort-by-order-alt pull-right sorticon descending"
                              style="display:none;"></span>
                        <span class="glyphicon glyphicon-sort-by-order pull-right sorticon ascending"
                              style="display:none;"></span>
                    </th>
                    <th class="sortRepoTable" data-sortby="stargazers_count" data-sortdir="descending">
                        <span class="glyphicon glyphicon-star"></span> Star
                        <span class="glyphicon glyphicon-sort-by-order-alt pull-right sorticon descending"
                              style="display:none;"></span>
                        <span class="glyphicon glyphicon-sort-by-order pull-right sorticon ascending"
                              style="display:none;"></span>
                    </th>
                </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
    <div class="col-sm-4" id="repoFilterCharts">
        <div class="well well-sm">Filter the list of repositorys by access or owner</div>
        <div id="repo-access-chart">
            <span class="text-primary">Filter by access</span>
                <span class="reset pull-right" style="display: none;">
                    Showing : <span class="filter"></span>
                    <a class="reset" href="javascript: void 0;" data-chart="repo-access-chart" style="display:none;">Reset
                        filter</a>
                </span>

            <div class="clearfix"></div>
        </div>
        <div id="repo-owner-chart">
            <span class="text-primary">Filter by owner</span>
                <span class="reset pull-right" style="display: none;">
                    Showing : <span class="filter"></span>
                    <a class="reset" href="javascript: void 0;" data-chart="repo-owner-chart" style="display:none;">Reset
                        filter</a>
                </span>

            <div class="clearfix"></div>
        </div>
    </div>
</div>
<div class="row" id="selectBranchesRow" ng-if="branches">
    <div class="col-sm-8">
        <form id="selectBranchesForm" class="form-inline" role="form">
            <div id="selectBranchesContainer" class="form-group">
                <label for="selectBranch" id="selectBranchLabel">Branch: </label>
                <select id="selectBranch" class="form-control input-sm" ng-model="selectedBranch"
                        ng-options="branch.name for branch in branches" ng-change="filter.sha = selectedBranch.name"></select>
            </div>
            <button onclick="return false;" class="btn btn-primary btn-sm pull-right" id="applyBranchSettings">Apply
            </button>
            <div class="clear-fix"></div>
        </form>
    </div>
</div>

<div ng-show="filter.repo">

    <!--Preview Modal-->
    <div class="modal fade" id="peviewModal" tabindex="-1" role="dialog" aria-labelledby="commitListPreview"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">Commit List Preview</h4>
                </div>
                <div class="modal-body" id="commitList"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!--Preview Modal-->

    <div class="row">
        <div class="col-sm-12">
            <div class="well well-sm">
                Now you can refine the filter/statistics. You can also store filter settings at every point.
                With the 'Preview' button you will see a list of commits with the current filter applied.<br>
                So you can always check if your filter does match anything.
                Your current filter settings are:
                <div id="currentFilterSettings">

                </div>
            </div>
            <button type="button" id="save" class="btn btn-warning pull-right" ng-click="save()">Not saved</button>
            <button type="button" id="preview" class="btn btn-default pull-right">Preview</button>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-8">
            <div class="well well-sm">
                The time range filter ca be set to reduce the amount of commits by setting either a
                sliding time window, eg. since 2 weeks ago, or fixed date ranges.
            </div>
            <div id="timeWindowFilter">
                <form id="timeChartSettings" class="form-inline" role="form">
                    <div class="form-group">
                        <select id="timeChartMethod" class="form-control input-sm">
                            <option value="sliding">Sliding Time Window</option>
                            <option value="fixed">Fixed Date Range</option>
                        </select>
                    </div>
                    <div class="form-group" id="timeChartSlidingSettings">
                        <input id="timeChartSlidingAmount" type="number" min="1" max="99" class="form-control input-sm" ng-model="sinceAmount">
                        <select id="timeChartSlidingPattern" class="form-control input-sm" ng-options="pattern.display for pattern in sincePatterns" ng-model="sincePattern" ></select>
                        ago
                    </div>
                    <div class="form-group" id="timeChartFixedSettings">
                        <label for="timeChartFixedStart" id="timeChartFixedStartLabel">Since</label>
                        <input id="timeChartFixedStart" type="date" class="form-control input-sm">
                        <label for="timeChartFixedEnd">Until</label>
                        <input id="timeChartFixedEnd" type="date" class="form-control input-sm">
                    </div>
                    <button onclick="return false;" class="btn btn-primary btn-sm pull-right"
                            id="applyTimeChartSettings">Apply
                    </button>
                    <div class="clear-fix"></div>
                </form>
            </div>
            <div id="time-chart"></div>
            <div class="clear-fix"></div>
            <div id="path-filter">
                <form id="path-filter-form" class="form-inline" role="form">
                    <div class="form-group">
                        <label for="path-filter-input">Filter by Path: </label>
                        <input type="text" id="path-filter-input" class="form-control input-sm" ng-model="filter.path" typeahead="entry.path for entry in tree | filter:$viewValue | limitTo:8" typeahead-append-to-body="true">
                        <button onclick="return false;" class="btn btn-primary btn-sm pull-right" id="applyPathFilter">
                            Apply
                        </button>
                        <button onclick="return false;" class="btn btn-default btn-sm pull-right" id="removePathFilter">
                            Remove
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-sm-4" id="commitFilterCharts">
            <div class="well well-sm">Filter commits by author or review state</div>
            <div id="commitsPerAuthor-chart">
                <span class="text-primary">Filter by author</span>
                <span class="reset pull-right" style="display: none;">
                    Showing : <span class="filter"></span>
                    <a class="reset" href="javascript: void 0;" data-chart="repo-access-chart" style="display:none;">Reset
                        filter</a>
                </span>

                <div class="clear-fix"></div>
            </div>
            <div id="review-state-chart">
                <span class="text-primary">Filter by review state</span>
                <span class="reset pull-right" style="display: none;">
                    Showing : <span class="filter"></span>
                    <a class="reset" href="javascript: void 0;" data-chart="review-state-chart" style="display:none;">Reset
                        filter</a>
                </span>

                <div class="clear-fix"></div>
            </div>
        </div>
    </div>
</div>